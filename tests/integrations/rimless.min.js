(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.rimless=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var helpers_1=require("./helpers");var rpc_1=require("./rpc");var types_1=require("./types");function connect(schema,options){if(schema===void 0){schema={}}if(options===void 0){options={}}console.log("GUEST - CONNECTING");return new Promise(function(resolve,reject){var localMethods=helpers_1.extractMethods(schema);function handleHandshakeResponse(event){if(event.data.action!==types_1.actions.HANDSHAKE_REPLY)return;console.log("GUEST - HANDSHAKE RESPONSE",event.data.schema,event.data.methods);var unregisterLocal=rpc_1.registerLocalMethods(schema,localMethods,event.data.connectionID);var _a=rpc_1.registerRemoteMethods(event.data.schema,event.data.methods,event.data.connectionID,event),remote=_a.remote,unregisterRemote=_a.unregisterRemote;var close=function(){self.removeEventListener(types_1.events.MESSAGE,handleHandshakeResponse);unregisterRemote();unregisterLocal()};console.log("GUEST - HRESOLVE CONNECTION");var connection={remote:remote,close:close};return resolve(connection)}self.addEventListener(types_1.events.MESSAGE,handleHandshakeResponse);var payload={action:types_1.actions.HANDSHAKE_REQUEST,methods:localMethods,schema:JSON.parse(JSON.stringify(schema))};console.log("GUEST - PUBLISH HANDSHAKE REQUEST",payload);if(helpers_1.isWorker())self.postMessage(payload);else window.parent.postMessage(payload,"*")})}exports.default={connect:connect}},{"./helpers":2,"./rpc":5,"./types":6}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CONNECTION_TIMEOUT=1e3;function isTrustedRemote(event){return true}exports.isTrustedRemote=isTrustedRemote;function isWorker(){return typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope}exports.isWorker=isWorker;function extractMethods(obj){var paths=[];(function parse(obj,path){if(path===void 0){path=""}for(var prop in obj){var propPath=path?path+"."+prop:prop;if(obj[prop]===Object(obj[prop])){parse(obj[prop],propPath)}if(typeof obj[prop]==="function"){paths.push(propPath)}}})(obj);return paths}exports.extractMethods=extractMethods;var urlRegex=/^(https?:|file:)?\/\/([^/:]+)?(:(\d+))?/;var ports={"http:":"80","https:":"443"};function getOriginFromURL(url){var location=document.location;var regexResult=urlRegex.exec(url||"");var protocol;var hostname;var port;if(regexResult){protocol=regexResult[1]?regexResult[1]:location.protocol;hostname=regexResult[2];port=regexResult[4]}else{protocol=location.protocol;hostname=location.hostname;port=location.port}if(protocol==="file:"){return"null"}var portSuffix=port&&port!==ports[protocol]?":"+port:"";return protocol+"//"+hostname+portSuffix}exports.getOriginFromURL=getOriginFromURL},{}],3:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var short_uuid_1=__importDefault(require("short-uuid"));var helpers_1=require("./helpers");var rpc_1=require("./rpc");var types_1=require("./types");var connections={};function isValidTarget(iframe,event){var childURL=iframe.getAttribute("src");var childOrigin=helpers_1.getOriginFromURL(childURL);var hasProperOrigin=event.origin===childOrigin;var hasProperSource=event.source===iframe.contentWindow;return hasProperOrigin&&hasProperSource}function connect(guest,schema,options){if(schema===void 0){schema={}}if(!guest)throw new Error("a target is required");var guestIsWorker=guest.onerror!==undefined&&guest.onmessage!==undefined;var listeners=guestIsWorker?guest:window;console.log("HOST - CONNECTING");return new Promise(function(resolve,reject){var connectionID=short_uuid_1.default.generate();function handleHandshake(event){if(!guestIsWorker&&!isValidTarget(guest,event))return;if(event.data.action!==types_1.actions.HANDSHAKE_REQUEST)return;console.log("HOST - HANDSHAKE REQUEST");var localMethods=helpers_1.extractMethods(schema);var unregisterLocal=rpc_1.registerLocalMethods(schema,localMethods,connectionID,guestIsWorker?guest:undefined);var _a=rpc_1.registerRemoteMethods(event.data.schema,event.data.methods,connectionID,event,guestIsWorker?guest:undefined),remote=_a.remote,unregisterRemote=_a.unregisterRemote;var payload={action:types_1.actions.HANDSHAKE_REPLY,connectionID:connectionID,methods:localMethods,schema:JSON.parse(JSON.stringify(schema))};if(guestIsWorker)guest.postMessage(payload);else event.source.postMessage(payload,event.origin);var close=function(){listeners.removeEventListener(types_1.events.MESSAGE,handleHandshake);unregisterRemote();unregisterLocal()};var connection={remote:remote,close:close};connections[connectionID]=connection;return resolve(connection)}listeners.addEventListener(types_1.events.MESSAGE,handleHandshake)})}exports.default={connect:connect}},{"./helpers":2,"./rpc":5,"./types":6,"short-uuid":11}],4:[function(require,module,exports){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var guest_1=__importDefault(require("./guest"));exports.guest=guest_1.default;var host_1=__importDefault(require("./host"));exports.host=host_1.default;var helpers_1=require("./helpers");exports.isWorker=helpers_1.isWorker},{"./guest":1,"./helpers":2,"./host":3}],5:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var lodash_get_1=__importDefault(require("lodash.get"));var lodash_set_1=__importDefault(require("lodash.set"));var short_uuid_1=__importDefault(require("short-uuid"));var helpers_1=require("./helpers");var types_1=require("./types");function registerLocalMethods(schema,methods,_connectionID,guest){if(schema===void 0){schema={}}if(methods===void 0){methods=[]}var listeners=[];methods.forEach(function(methodName){function handleCall(event){return __awaiter(this,void 0,void 0,function(){var _a,action,callID,connectionID,callName,_b,args,payload,result,error_1;return __generator(this,function(_c){switch(_c.label){case 0:console.log("HANDLE RPC REQUEST");_a=event.data,action=_a.action,callID=_a.callID,connectionID=_a.connectionID,callName=_a.callName,_b=_a.args,args=_b===void 0?[]:_b;if(action!==types_1.actions.RPC_REQUEST)return[2];if(!helpers_1.isTrustedRemote(event))return[2];if(!callID||!callName)return[2];if(callName!==methodName)return[2];if(connectionID!==_connectionID)return[2];console.log("HANDLE RPC REQUEST");payload={action:types_1.actions.RPC_RESOLVE,callID:callID,callName:callName,connectionID:connectionID,result:null,error:null};_c.label=1;case 1:_c.trys.push([1,3,,4]);return[4,lodash_get_1.default(schema,methodName).apply(void 0,args)];case 2:result=_c.sent();console.log("RPC RESULTS",result);payload.result=JSON.parse(JSON.stringify(result));return[3,4];case 3:error_1=_c.sent();payload.error=JSON.parse(JSON.stringify(error_1,Object.getOwnPropertyNames(error_1)));return[3,4];case 4:if(guest)guest.postMessage(payload);else if(helpers_1.isWorker())self.postMessage(payload);else event.source.postMessage(payload,event.origin);return[2]}})})}if(guest)guest.addEventListener(types_1.events.MESSAGE,handleCall);else self.addEventListener(types_1.events.MESSAGE,handleCall);listeners.push(function(){return self.removeEventListener(types_1.events.MESSAGE,handleCall)})});return function(){return listeners.forEach(function(unregister){return unregister()})}}exports.registerLocalMethods=registerLocalMethods;function registerRemoteMethods(schema,methods,_connectionID,event,guest){if(schema===void 0){schema={}}if(methods===void 0){methods=[]}var remote=Object.assign({},schema);var listeners=[];methods.forEach(function(methodName){var rpc=createRPC(methodName,_connectionID,event,listeners,guest);lodash_set_1.default(remote,methodName,rpc)});return{remote:remote,unregisterRemote:function(){return listeners.forEach(function(unregister){return unregister()})}}}exports.registerRemoteMethods=registerRemoteMethods;function createRPC(_callName,_connectionID,event,listeners,guest){if(listeners===void 0){listeners=[]}return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}console.log("RPC CALL");return new Promise(function(resolve,reject){var callID=short_uuid_1.default.generate();function handleResponse(event){var _a=event.data,callID=_a.callID,connectionID=_a.connectionID,callName=_a.callName,result=_a.result,error=_a.error,action=_a.action;if(!helpers_1.isTrustedRemote(event))return;if(!callID||!callName)return;if(callName!==_callName)return;if(connectionID!==_connectionID)return;if(action===types_1.actions.RPC_RESOLVE)return resolve(result);if(action===types_1.actions.RPC_REJECT)return reject(error)}var payload={action:types_1.actions.RPC_REQUEST,args:JSON.parse(JSON.stringify(args)),callID:callID,callName:_callName,connectionID:_connectionID};if(guest)guest.addEventListener(types_1.events.MESSAGE,handleResponse);else self.addEventListener(types_1.events.MESSAGE,handleResponse);listeners.push(function(){return self.removeEventListener(types_1.events.MESSAGE,handleResponse)});console.log("POST MESSAGE",payload);if(guest)guest.postMessage(payload);else if(helpers_1.isWorker())self.postMessage(payload);else event.source.postMessage(payload,event.origin)})}}exports.createRPC=createRPC},{"./helpers":2,"./types":6,"lodash.get":9,"lodash.set":10,"short-uuid":11}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var events;(function(events){events["MESSAGE"]="message"})(events=exports.events||(exports.events={}));var actions;(function(actions){actions["HANDSHAKE_REQUEST"]="RIMLESS/HANDSHAKE_REQUEST";actions["HANDSHAKE_REPLY"]="RIMLESS/HANDSHAKE_REPLY";actions["RPC_REQUEST"]="RIMLESS/RPC_REQUEST";actions["RPC_RESOLVE"]="RIMLESS/RPC_RESOLVE";actions["RPC_REJECT"]="RIMLESS/RPC_REJECT"})(actions=exports.actions||(exports.actions={}))},{}],7:[function(require,module,exports){var Converter=require("./src/converter");function anyBase(srcAlphabet,dstAlphabet){var converter=new Converter(srcAlphabet,dstAlphabet);return function(number){return converter.convert(number)}}anyBase.BIN="01";anyBase.OCT="01234567";anyBase.DEC="0123456789";anyBase.HEX="0123456789abcdef";module.exports=anyBase},{"./src/converter":8}],8:[function(require,module,exports){"use strict";function Converter(srcAlphabet,dstAlphabet){if(!srcAlphabet||!dstAlphabet||!srcAlphabet.length||!dstAlphabet.length){throw new Error("Bad alphabet")}this.srcAlphabet=srcAlphabet;this.dstAlphabet=dstAlphabet}Converter.prototype.convert=function(number){var i,divide,newlen,numberMap={},fromBase=this.srcAlphabet.length,toBase=this.dstAlphabet.length,length=number.length,result=typeof number==="string"?"":[];if(!this.isValid(number)){throw new Error('Number "'+number+'" contains of non-alphabetic digits ('+this.srcAlphabet+")")}if(this.srcAlphabet===this.dstAlphabet){return number}for(i=0;i<length;i++){numberMap[i]=this.srcAlphabet.indexOf(number[i])}do{divide=0;newlen=0;for(i=0;i<length;i++){divide=divide*fromBase+numberMap[i];if(divide>=toBase){numberMap[newlen++]=parseInt(divide/toBase,10);divide=divide%toBase}else if(newlen>0){numberMap[newlen++]=0}}length=newlen;result=this.dstAlphabet.slice(divide,divide+1).concat(result)}while(newlen!==0);return result};Converter.prototype.isValid=function(number){var i=0;for(;i<number.length;++i){if(this.srcAlphabet.indexOf(number[i])===-1){return false}}return true};module.exports=Converter},{}],9:[function(require,module,exports){(function(global){var FUNC_ERROR_TEXT="Expected a function";var HASH_UNDEFINED="__lodash_hash_undefined__";var INFINITY=1/0;var funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]";var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reEscapeChar=/\\(\\)?/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();function getValue(object,key){return object==null?undefined:object[key]}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!="function"){try{result=!!(value+"")}catch(e){}}return result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Symbol=root.Symbol,splice=arrayProto.splice;var Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create");var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}function baseGet(object,path){path=isKey(path,object)?[path]:castPath(path);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseToString(value){if(typeof value=="string"){return value}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function castPath(value){return isArray(value)?value:stringToPath(value)}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var stringToPath=memoize(function(string){string=toString(string);var result=[];if(reLeadingDot.test(string)){result.push("")}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result});function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function memoize(func,resolver){if(typeof func!="function"||resolver&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;function eq(value,other){return value===other||value!==value&&other!==other}var isArray=Array.isArray;function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&typeof value=="object"}function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toString(value){return value==null?"":baseToString(value)}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}module.exports=get}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],10:[function(require,module,exports){(function(global){var FUNC_ERROR_TEXT="Expected a function";var HASH_UNDEFINED="__lodash_hash_undefined__";var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991;var funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]";var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reEscapeChar=/\\(\\)?/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();function getValue(object,key){return object==null?undefined:object[key]}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!="function"){try{result=!!(value+"")}catch(e){}}return result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Symbol=root.Symbol,splice=arrayProto.splice;var Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create");var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){object[key]=value}}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=isKey(path,object)?[path]:castPath(path);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}function baseToString(value){if(typeof value=="string"){return value}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function castPath(value){return isArray(value)?value:stringToPath(value)}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var stringToPath=memoize(function(string){string=toString(string);var result=[];if(reLeadingDot.test(string)){result.push("")}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result});function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function memoize(func,resolver){if(typeof func!="function"||resolver&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;function eq(value,other){return value===other||value!==value&&other!==other}var isArray=Array.isArray;function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&typeof value=="object"}function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toString(value){return value==null?"":baseToString(value)}function set(object,path,value){return object==null?object:baseSet(object,path,value)}module.exports=set}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],11:[function(require,module,exports){var anyBase=require("any-base");var uuidV4=require("uuid/v4");var flickrBase58="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ";var cookieBase90="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%&'()*+-./:<=>?@[]^_`{|}~";var toFlickr;function shortenUUID(longId,translator){return translator(longId.toLowerCase().replace(/-/g,""))}function enlargeUUID(shortId,translator){var uu1=translator(shortId);var leftPad="";var m;for(var i=0,len=32-uu1.length;i<len;++i){leftPad+="0"}m=(leftPad+uu1).match(/(\w{8})(\w{4})(\w{4})(\w{4})(\w{12})/);return[m[1],m[2],m[3],m[4],m[5]].join("-")}module.exports=function(){function MakeConvertor(toAlphabet){var useAlphabet=toAlphabet||flickrBase58;var fromHex=anyBase(anyBase.HEX,useAlphabet);var toHex=anyBase(useAlphabet,anyBase.HEX);var generate=function(){return shortenUUID(uuidV4(),fromHex)};return{new:generate,generate:generate,uuid:uuidV4,fromUUID:function(uuid){return shortenUUID(uuid,fromHex)},toUUID:function(shortUuid){return enlargeUUID(shortUuid,toHex)},alphabet:useAlphabet}}MakeConvertor.constants={flickrBase58:flickrBase58,cookieBase90:cookieBase90};MakeConvertor.uuid=uuidV4;MakeConvertor.generate=function(){if(!toFlickr){toFlickr=anyBase(anyBase.HEX,flickrBase58)}return shortenUUID(uuidV4(),toFlickr)};return MakeConvertor}()},{"any-base":7,"uuid/v4":14}],12:[function(require,module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}module.exports=bytesToUuid},{}],13:[function(require,module,exports){var getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){getRandomValues(rnds8);return rnds8}}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;rnds[i]=r>>>((i&3)<<3)&255}return rnds}}},{}],14:[function(require,module,exports){var rng=require("./lib/rng");var bytesToUuid=require("./lib/bytesToUuid");function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options==="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}module.exports=v4},{"./lib/bytesToUuid":12,"./lib/rng":13}]},{},[4])(4)});
